<html>
 <head>
  <title>QRcode read</title>
 </head>
 <body class="body">
<script type="text/javascript" src="libs/jsqrcode/grid.js"></script>
<script type="text/javascript" src="libs/jsqrcode/version.js"></script>
<script type="text/javascript" src="libs/jsqrcode/detector.js"></script>
<script type="text/javascript" src="libs/jsqrcode/formatinf.js"></script>
<script type="text/javascript" src="libs/jsqrcode/errorlevel.js"></script>
<script type="text/javascript" src="libs/jsqrcode/bitmat.js"></script>
<script type="text/javascript" src="libs/jsqrcode/datablock.js"></script>
<script type="text/javascript" src="libs/jsqrcode/bmparser.js"></script>
<script type="text/javascript" src="libs/jsqrcode/datamask.js"></script>
<script type="text/javascript" src="libs/jsqrcode/rsdecoder.js"></script>
<script type="text/javascript" src="libs/jsqrcode/gf256poly.js"></script>
<script type="text/javascript" src="libs/jsqrcode/gf256.js"></script>
<script type="text/javascript" src="libs/jsqrcode/decoder.js"></script>
<script type="text/javascript" src="libs/jsqrcode/qrcode.js"></script>
<script type="text/javascript" src="libs/jsqrcode/findpat.js"></script>
<script type="text/javascript" src="libs/jsqrcode/alignpat.js"></script>
<script type="text/javascript" src="libs/jsqrcode/databr.js"></script>

<link rel="stylesheet" type="text/css" href="pop.css">

<script type="text/javascript">
function getObjectURL(file){
    return window.webkitURL.createObjectURL(file)  ;
}
function readFiles(files) {
    console.log(file);
    //console.log("xxxx")
    if (files.length) {
        var file = files[0];
        qrcode.decode(getObjectURL(file));
        qrcode.callback = function(imgMsg){
            //console.log(imgMsg);
            constrict="^(http|https)://.*"
            var reg = new RegExp(constrict)
            if(imgMsg.trim().search(reg) == 0) {
                window.open(imgMsg, "_blank")
            } else {
                alert(imgMsg);
            }
        }
        
    }
}

</script>
<div>
<button id="options" title="more"></button>
<div id="readButton">
    <input id="read" type="file" title="read image"></input>
</div>
</div>  
<script>
var ele2 = document.getElementById("read");
ele2.addEventListener("change", 
function(){
    var files=document.querySelector('#read').files;
    readFiles(files);
}, 
false); 
  

</script>



 </body>
</html>